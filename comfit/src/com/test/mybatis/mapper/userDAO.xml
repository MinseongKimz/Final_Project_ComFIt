<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- ○ mapper 엘리먼트의 『namespace="패키지 경로가 포함된 인터페이스"』 -->
<!--    - 인터페이스 내부에 <<메소드명>>이 선언되어 있어야 한다. -->
<!--    - 이 ★<<메소드 명과 id="식별자"가 일치>>★해야 한다 -->
<mapper namespace="com.test.mybatis.IAdmin">

	<!-- ○ 『id="식별자"』 속성 추가 -->
	<!--     - 인터페이스에 선언된 메소드의 이름과 일치해야 하며 -->
	<!--     호출 메소드명 역할을 수행하게 된다. -->
	
	<!-- ○ 『resultType="패키지 경로가 포함된 자료형 클래스"』 속성 추가 -->
	<!--    - string : java.lang.String
	        - byte : java.lang.Byte
	        - long : java.lang.Long
	        - short : java.lang.Short
	        - int : java.lang.Integer
	        - Integer : java.lang.Integer
	        - double : java.lang.Double
	        - float : java.lang.Float
	        - boolean : java.lang.Boolean
	        - decimal : java.math.BigDecimal
	        - Object : java.lang.Object
	        - map : java.util.Map
	        - hashmap : java.util.HashMap
	        - list : java.lang.List
	        - arraylist : java.util.Arraylist
	        - collection : java.util.Collection
	        - iterator : java.util.Iterator
	-->
	
	<!-- ○ 쿼리 내부에 있는 컬럼명의 정보가 -->
	<!--    자료형 클래스(DTO) 멤버 변수(속성)와 일치하는 경우 -->
	<!--    <<자동 매핑>>이 이루어진다. -->
	<!--    또한 SQL 문 내부에 세미콜론(;) 이 있으면 안된다. -->
	<select id="adminUserList" resultType="com.test.mybatis.userDTO">
		SELECT U_ID, U_EMAIL, U_NAME, U_NICKNAME, U_TEL, U_JOINDATE, 
		(
		    SELECT COUNT(*) AS COUNT
		    FROM
		    (
		    SELECT BAN_ID, BAN_DATE, REPORTED, REPORTER
		    FROM DIRECT_TRANS_BANNED_VIEW
		    UNION
		    SELECT BAN_ID, BAN_DATE, REPORTED, REPORTER
		    FROM DELIVERY_TRANS_BANNED_VIEW
		    UNION
		    SELECT BAN_ID, BAN_DATE, REPORTED, REPORTER
		    FROM DIRECT_PD_BANNED_VIEW
		    UNION
		    SELECT BAN_ID, BAN_DATE, REPORTED, REPORTER
		    FROM DELIVERY_PD_BANNED_VIEW
		    )
		    WHERE U_ID = REPORTED
		) AS BANCOUNT
		FROM USER_INFORMATION
	</select>
	
	<!-- 
	<insert id="add">
		INSERT INTO TBL_STUDENT(SID, NAME, TEL)
		VALUES(#{sid}, #{name}, #{tel})
	</insert>
	-->
	
	
	
	
	<!-- <select id="search" resultType="com.test.mybatis.StudentDTO">
		SELECT SID, NAME, TEL
		FROM TBL_STUDENT
		WHERE SID = #{sid}
	</select> -->


</mapper>